[gd_scene load_steps=4 format=3 uid="uid://cudb3ax7udtio"]

[ext_resource type="Texture2D" uid="uid://boftbeokdlt6u" path="res://rock-sticker.png" id="1_xhfnw"]

[sub_resource type="GDScript" id="GDScript_xhfnw"]
resource_name = "Player"
script/source = "extends CharacterBody2D

const SPEED = 300
var gravityModifier = 1

func _ready() -> void:
	add_to_group(\"Player\")
	
func _process(_delta: float) -> void:
	if (Input.is_action_just_pressed(\"skip\")):
		print(\"skip lozer\")
		var game_node = get_tree().get_current_scene()  # THIS is Game.tscn
		if game_node and game_node.has_method(\"next_level\"):
			game_node.next_level()
		else:
			print(\"Error: Game node has no next_level()\")
			

func _physics_process(delta) -> void:
	# Apply gravity
	velocity += get_gravity() * delta * gravityModifier

	# Horizontal movement
	var dir = Input.get_axis(\"left\",\"right\")
	if dir != 0:
		velocity.x = dir * SPEED * gravityModifier
	else:
		velocity.x = move_toward(velocity.x, 0, SPEED)

	# Flip gravity
	if Input.is_action_just_pressed(\"flip\") and is_on_floor():
		gravityModifier *= -1
		velocity.y = 1000 * gravityModifier
		rotation_degrees += 180
		up_direction *= -1

	move_and_slide()

	# Reset if fallen
	if position.y < -1500 or position.y > 1500 or Input.is_action_just_pressed(\"reset\"):
		get_parent().load_current_level()
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_e80uo"]
size = Vector2(58, 32)

[node name="Player" type="CharacterBody2D"]
script = SubResource("GDScript_xhfnw")

[node name="Sprite2D" type="Sprite2D" parent="."]
position = Vector2(2.86102e-06, -2.23517e-08)
scale = Vector2(0.114847, 0.114847)
texture = ExtResource("1_xhfnw")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("RectangleShape2D_e80uo")

[node name="Camera2D" type="Camera2D" parent="."]
ignore_rotation = false
zoom = Vector2(4, 4)
position_smoothing_enabled = true
position_smoothing_speed = 10.0
rotation_smoothing_enabled = true
